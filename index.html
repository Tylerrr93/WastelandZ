<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Wasteland Survivor</title>
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VARIABLES & RESET
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root{--bg:#0d1117;--panel:#161b22;--border:#30363d;--accent:#d29922;
--text:#c9d1d9;--danger:#da3633;--warn:#d29922;--good:#238636;--tile:36px}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Courier New',monospace;background:var(--bg);color:var(--text);
font-size:13px;height:100vh;height:100dvh;display:flex;flex-direction:column;
overflow:hidden;user-select:none;-webkit-user-select:none;touch-action:manipulation}
.app{max-width:1000px;margin:0 auto;width:100%;height:100%;display:flex;flex-direction:column}

/* â•â•â• INTRO SCREEN â•â•â• */
.intro{position:fixed;inset:0;background:#000;z-index:9999;display:none;
flex-direction:column;justify-content:center;align-items:center;padding:30px}
.intro.on{display:flex}
.intro.fade-out{animation:introOut 1.2s ease forwards}
@keyframes introOut{0%{opacity:1}100%{opacity:0}}
.intro-txt{color:#8b0000;font-size:16px;line-height:1.8;text-align:center;
max-width:400px;opacity:0;font-style:italic;letter-spacing:0.5px}
.intro-txt.fade-in{animation:introFade 3s ease forwards}
@keyframes introFade{0%{opacity:0;transform:translateY(10px)}100%{opacity:1;transform:translateY(0)}}
.intro-btn{margin-top:40px;background:none;border:1px solid #8b0000;color:#8b0000;
padding:12px 30px;font-family:inherit;font-size:14px;cursor:pointer;
letter-spacing:2px;text-transform:uppercase;opacity:0;transition:all 0.3s}
.intro-btn.fade-in{animation:introFade 1.5s ease forwards}
.intro-btn:hover{background:#8b0000;color:#000;border-color:#ff2020}

/* â•â•â• HEADER â•â•â• */
.header{padding:4px 10px;background:#000;border-bottom:1px solid var(--border);
display:flex;justify-content:space-between;align-items:center;height:42px;flex-shrink:0}
.sg{display:flex;gap:8px;font-weight:bold;font-size:12px}
.stat-g{display:flex;flex-direction:column;line-height:1.1}
.stat-g .stat-lbl{display:flex;align-items:center;gap:2px}
.s-hp .stat-lbl{color:#ff7b72}.s-stm .stat-lbl{color:#e2e210}
.s-h2o .stat-lbl{color:#79c0ff}.s-food .stat-lbl{color:#d2a8ff}
.hbar{width:100%;height:2px;background:#1a1a1a;border-radius:1px;margin-top:1px;overflow:hidden}
.hfill{height:100%;border-radius:1px;transition:width 0.3s ease}
.hf-hp{background:#ff7b72}.hf-stm{background:#e2e210}.hf-h2o{background:#79c0ff}.hf-food{background:#d2a8ff}

.stat-down .stat-lbl{animation:statDrain 0.5s ease}
.stat-up .stat-lbl{animation:statGain 0.4s ease}
@keyframes statDrain{0%{opacity:1}25%{opacity:.3;filter:brightness(2)}50%{opacity:.8}100%{opacity:1}}
@keyframes statGain{0%{opacity:1}40%{text-shadow:0 0 6px rgba(63,185,80,.8)}100%{opacity:1;text-shadow:none}}

.day-d{display:flex;flex-direction:column;align-items:flex-end;line-height:1.2}
.t-day{color:#e2c55a;font-weight:bold;font-size:11px}
.t-night{color:#6e7681;font-weight:bold;font-size:11px}

/* â•â•â• MAIN STAGE â•â•â• */
.main{flex:1;display:flex;overflow:hidden;min-height:0}
.mc{flex:0 0 auto;display:flex;flex-direction:column;border-right:1px solid var(--border);width:65vmin;max-width:500px}
.vp{flex:1;background:#000;display:flex;justify-content:center;align-items:center;position:relative;overflow:hidden}
.night-ov{position:absolute;inset:0;background:rgba(5,10,30,0.45);pointer-events:none;z-index:40;opacity:0;transition:opacity 0.8s}.night-ov.on{opacity:1}
.insp{height:44px;background:#111;border-top:1px solid var(--border);padding:5px 10px;display:flex;align-items:center;gap:8px;flex-shrink:0}
.insp-i{font-size:18px;width:30px;height:30px;background:#1a1a1a;border:1px solid #333;border-radius:4px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.tag{font-size:9px;font-weight:bold;padding:2px 6px;border-radius:3px;text-transform:uppercase;letter-spacing:.5px}
.tag-l{background:#0d3040;color:#3498db;border:1px solid #2980b9}
.tag-d{background:#3a1010;color:#f85149;border:1px solid var(--danger);animation:pf 1.5s infinite}
.tag-c{background:#2a1a10;color:#d29922;border:1px solid #aa7722}
.tag-camp{background:#1a1a10;color:#c8a832;border:1px solid #8a7020;font-size:10px}
.tag-salv{background:#1a1520;color:#aa88cc;border:1px solid #7755aa;font-size:10px}
.tag-floor{background:#0d2030;color:#6090b0;border:1px solid #4070a0;font-size:10px}
.tag-crate{background:#2a2010;color:#d29922;border:1px solid #8a6a20;font-size:10px}

/* â•â•â• LOG â•â•â• */
.lc{flex:1;display:flex;flex-direction:column;background:#080808;min-width:140px}
.lh{padding:4px 8px;font-size:10px;color:#555;border-bottom:1px solid #1a1a1a;background:#0d0d0d;letter-spacing:1px}
.ll{flex:1;overflow-y:auto;padding:8px;font-size:11px}
.le{margin-bottom:5px;padding-left:8px;border-left:2px solid transparent;color:#555;line-height:1.3}
.l-good{color:#3fb950;border-left-color:#3fb950}.l-bad{color:#f85149;border-left-color:#f85149}
.l-imp{color:var(--accent);border-left-color:var(--accent)}.l-combat{color:#ff9f43;border-left-color:#ff9f43}

/* â•â•â• MOODLES â•â•â• */
.moo{position:absolute;top:8px;right:8px;display:flex;flex-direction:column;align-items:flex-end;gap:3px;pointer-events:none;z-index:50}
.mo{background:rgba(0,0,0,.85);border:1px solid #444;padding:3px 7px;border-radius:3px;font-weight:bold;font-size:10px}
.m-w{color:var(--warn);border-color:var(--warn)}.m-b{color:#f85149;border-color:#f85149}
.m-c{color:#ff4040;border-color:#ff4040;animation:pf 1s infinite}
.loc-ov{position:absolute;top:6px;left:6px;background:rgba(0,0,0,.8);color:#777;padding:2px 6px;border-radius:3px;font-size:9px;border:1px solid #333;pointer-events:none;z-index:20}

/* â•â•â• BOTTOM BAR â•â•â• */
.bb{height:280px;display:flex;border-top:2px solid var(--border);background:var(--panel);flex-shrink:0}
.pl{flex:1;display:flex;flex-direction:column;border-right:1px solid var(--border);min-width:0}
.pr{width:160px;display:flex;align-items:center;justify-content:center;flex-shrink:0;padding:10px}
.mp{display:grid;grid-template-columns:repeat(3,1fr);gap:4px;width:100%}
.mp .btn{padding:12px;justify-content:center}
.cc{display:flex;align-items:center;justify-content:center;font-size:18px}
.tabs{display:flex;border-bottom:1px solid var(--border);background:#000}
.tb{flex:1;padding:10px 2px;background:0;border:none;color:#555;cursor:pointer;font-weight:bold;font-size:9px;font-family:inherit;letter-spacing:.3px;border-right:1px solid #1a1a1a;transition:color .2s}
.tb:last-child{border-right:none}.tb.on{background:var(--panel);color:var(--accent);border-top:2px solid var(--accent)}
.tab-flash{animation:tabPulse 0.6s ease}
@keyframes tabPulse{0%{color:#555}30%{color:#3fb950;text-shadow:0 0 6px rgba(63,185,80,.4)}100%{color:#555}}
.tc{flex:1;padding:10px;overflow-y:auto;display:none}.tc.on{display:block}
.ag{display:flex;flex-direction:column;gap:6px}

/* â•â•â• TILES â€” updated for new visual system â•â•â• */
.mg{display:grid;background:#030303;border:1px solid #222}
.tl{width:var(--tile);height:var(--tile);display:flex;align-items:center;justify-content:center;font-size:calc(var(--tile)*.6);position:relative;cursor:pointer}

/* FOG (Hidden tiles) */
.t-fog{background:repeating-linear-gradient(45deg,#050505,#050505 5px,#080808 5px,#080808 10px)!important;color:transparent!important}

/* MEMORY (Visited tiles) - REMOVED GRAYSCALE, JUST OPACITY */
.t-mem{opacity:0.5} 

.zi{position:absolute;z-index:8;filter:drop-shadow(0 0 3px rgba(200,0,0,.6));animation:zs 2s ease-in-out infinite}
.pi{position:absolute;z-index:10;color:#fff;filter:drop-shadow(0 0 3px rgba(0,0,0,.9))}
.it-barr{position:absolute;inset:0;background:repeating-linear-gradient(45deg,transparent,transparent 3px,rgba(139,90,43,.3) 3px,rgba(139,90,43,.3) 6px);border:1px solid #8b5a2b;z-index:5;pointer-events:none}

/* â•â•â• BUTTONS â•â•â• */
.btn{background:#1a1f27;border:1px solid #2a2f37;color:var(--text);padding:10px;cursor:pointer;border-radius:4px;width:100%;text-align:left;margin-bottom:4px;display:flex;justify-content:space-between;align-items:center;font-family:inherit;font-size:12px}
.btn:hover:not(:disabled){background:#2a2f37;border-color:#555}
.btn:active:not(:disabled){background:#333;transform:scale(.97)}.btn:disabled{opacity:.4;cursor:not-allowed}
.btn-a{padding:12px;justify-content:center;gap:8px;font-weight:bold}
.btn-s{padding:8px;font-size:11px;color:#888}
.btn-fight{background:#2a1515!important;border-color:#8b3030!important;color:#ff7b72!important}
.btn-fight:active{background:#3a2020!important}
.btn-salv{background:#1a1520!important;border-color:#5a3a70!important;color:#bb99dd!important}
.btn-salv:active{background:#2a2030!important}
.btn-stair{background:#0d2020!important;border-color:#2a5a50!important;color:#60c8a0!important}
.btn-stair:active{background:#1a3030!important}
.btn-ground{background:#1a1a15!important;border-color:#4a4830!important;color:#c8c060!important}
.btn-crate{background:#2a2010!important;border-color:#6a5020!important;color:#d29922!important}

/* â”€â”€ Rest buttons â”€â”€ */
.btn-rest-rough{background:#1a1a18!important;border-color:#3a3520!important;color:#999!important}
.btn-rest-bedroll{background:#1f1d18!important;border-color:#5a4830!important;color:#c8a050!important}
.btn-rest-shelter{background:#1a2018!important;border-color:#4a6830!important;color:#8aaa60!important}
.btn-rest-indoor{background:#201c18!important;border-color:#6a5a20!important;color:#c8a040!important}
.btn-rest-bunker{background:#1a2a10!important;border-color:#4a8020!important;color:#7cc832!important}
.rest-qual{display:inline-flex;gap:2px;margin-left:6px;vertical-align:middle}
.rest-dot{width:6px;height:6px;border-radius:50%;background:#2a2a2a;border:1px solid #444;display:inline-block}
.rest-dot-on{background:#d29922;border-color:#e8b830}
.btn-rest-bunker .rest-dot-on{background:#7cc832;border-color:#90e040}
.btn-rest-shelter .rest-dot-on{background:#8aaa60;border-color:#a0c070}
.rest-cost{color:#666;font-weight:normal;margin-left:6px}

/* â”€â”€ Placement buttons â”€â”€ */
.btn-place{background:#1a1d20!important;border-color:#3a5040!important;color:#8ab890!important}
.btn-place:hover:not(:disabled){background:#2a3530!important;border-color:#5a7a60!important}

/* â”€â”€ Craft flash â”€â”€ */
.craft-flash{animation:craftPop 0.5s ease;border-color:#3fb950!important}
@keyframes craftPop{0%{background:#1a2f1a;border-color:#3fb950}100%{background:#1a1f27;border-color:#2a2f37}}

/* â•â•â• ITEMS â•â•â• */
.ib{cursor:pointer;background:#1a1a1a;border:1px solid #2a2a2a;border-radius:3px;font-family:inherit;font-size:10px;padding:4px 8px;margin-left:3px;color:#999}
.ib:hover{background:#2a2a2a;color:#fff}.ib-u{border-color:#238636;color:#3fb950}
.ib-d{border-color:#8b3030;color:#da3633}.ib-p{border-color:#3a5040;color:#8ab890}
.ii{display:flex;align-items:center;padding:8px;border-bottom:1px solid #1a1a1a}
.dt{height:3px;background:#1a1a1a;border-radius:2px;margin-top:3px}.df{height:100%;border-radius:2px}
.bs{color:#888;font-size:10px}.inv-w{padding:6px 10px;font-weight:bold;font-size:11px;border-bottom:1px solid #222;color:#888}
.w-h{color:var(--danger);animation:pf 1.5s infinite}
.cs{display:flex;gap:12px;padding:8px 0;flex-wrap:wrap;font-size:12px}
.sr{display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid #1a1a1a;font-size:12px}
.sl{font-size:10px;color:#555;padding:6px 0 3px;letter-spacing:1px;text-transform:uppercase;border-bottom:1px solid #1a1a1a}
.eq{display:flex;align-items:center;gap:8px;padding:5px 0;font-size:11px;border-bottom:1px solid #111}
.sln{color:#555;text-transform:uppercase;font-size:9px;width:50px}

/* â•â•â• DEATH â•â•â• */
.ds{position:fixed;inset:0;z-index:1000;background:rgba(0,0,0,.95);display:none;justify-content:center;align-items:center}
.ds.on{display:flex}
.dc{text-align:center;padding:40px;animation:df .5s ease}
.d-sk{font-size:80px;animation:dp 2s infinite}.d-t{font-size:28px;color:#da3633;margin:20px 0;letter-spacing:6px}
.d-s{color:#888;margin-bottom:30px;line-height:2}.d-b{max-width:200px;margin:0 auto;text-align:center;padding:15px!important;font-weight:bold;color:var(--accent)!important;border-color:var(--accent)!important}
@keyframes pf{0%,100%{opacity:1}50%{opacity:.6}}@keyframes zs{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}
@keyframes df{0%{transform:scale(.8);opacity:0}100%{transform:scale(1);opacity:1}}
@keyframes dp{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}

/* â•â•â• MOBILE â•â•â• */
@media(max-width:600px){
.main{flex-direction:column}
.mc{width:100%;height:45vh;border-right:none;border-bottom:1px solid var(--border);max-width:none}
.lc{flex:1;min-height:0}.bb{height:240px}.pr{width:135px;padding:8px}
.sg{gap:5px;font-size:11px}
.intro-txt{font-size:14px;padding:0 20px}
}
@media(max-height:700px){.bb{height:220px}}
</style>
</head>
<body>

<div id="introScr" class="intro">
  <div id="introTxt" class="intro-txt">
    It's been years since you've seen the outside...<br><br>
    Supplies are low and it's time to go up<br>to see what the world has become.
  </div>
  <button id="introBtn" class="intro-btn">Emerge</button>
</div>

<div class="app">
  <div class="header">
    <div class="sg">
      <span class="stat-g s-hp">
        <span class="stat-lbl">â™¥ <span id="vHp">--</span></span>
        <div class="hbar"><div id="bHp" class="hfill hf-hp" style="width:100%"></div></div>
      </span>
      <span class="stat-g s-stm">
        <span class="stat-lbl">âš¡ <span id="vStm">--</span></span>
        <div class="hbar"><div id="bStm" class="hfill hf-stm" style="width:100%"></div></div>
      </span>
    </div>
    <div class="sg">
      <span class="stat-g s-h2o">
        <span class="stat-lbl">ğŸ’§ <span id="vH2o">--</span></span>
        <div class="hbar"><div id="bH2o" class="hfill hf-h2o" style="width:100%"></div></div>
      </span>
      <span class="stat-g s-food">
        <span class="stat-lbl">ğŸ– <span id="vFood">--</span></span>
        <div class="hbar"><div id="bFood" class="hfill hf-food" style="width:100%"></div></div>
      </span>
    </div>
    <div class="day-d">
      <span id="vDay" class="t-day">Day 1</span>
      <span id="vTime" style="font-size:9px;color:#666">Morning</span>
    </div>
  </div>

  <div class="main">
    <div class="mc">
      <div class="vp" id="viewport">
        <div id="mapC"></div>
        <div id="locOv" class="loc-ov">...</div>
        <div id="moodles" class="moo"></div>
        <div id="nightOv" class="night-ov"></div>
      </div>
      <div class="insp">
        <div class="insp-i" id="iIcon">?</div>
        <div style="min-width:0;flex:1">
          <div id="iName" style="font-weight:bold;color:#fff;font-size:12px">Unknown</div>
          <div id="iDesc" style="color:#888;font-size:10px">--</div>
        </div>
        <div id="iTags" style="margin-left:auto;white-space:nowrap;display:flex;gap:4px"></div>
      </div>
    </div>
    <div class="lc">
      <div class="lh">SURVIVAL LOG</div>
      <div id="gameLog" class="ll"></div>
    </div>
  </div>

  <div class="bb">
    <div class="pl">
      <div class="tabs">
        <button class="tb on" data-tab="act" onclick="G.setTab('act')">ACTIONS</button>
        <button class="tb" data-tab="inv" onclick="G.setTab('inv')">INV</button>
        <button class="tb" data-tab="ground" onclick="G.setTab('ground')">GROUND</button>
        <button class="tb" data-tab="craft" onclick="G.setTab('craft')">CRAFT</button>
        <button class="tb" data-tab="crate" onclick="G.setTab('crate')">CRATE</button>
        <button class="tb" data-tab="char" onclick="G.setTab('char')">STATUS</button>
      </div>
      <div id="tab-act" class="tc on"><div id="actList" class="ag"></div></div>
      <div id="tab-inv" class="tc"><div id="invList"></div></div>
      <div id="tab-ground" class="tc"><div id="groundList"></div></div>
      <div id="tab-craft" class="tc"><div id="craftList"></div></div>
      <div id="tab-crate" class="tc"><div id="crateList"></div></div>
      <div id="tab-char" class="tc">
        <div class="cs">
          <span>ğŸ‘ <strong id="sVis">0</strong></span>
          <span>âš”ï¸ <strong id="sAtk">0</strong></span>
          <span>ğŸ›¡ï¸ <strong id="sDef">0</strong></span>
          <span>ğŸ¥¾ <strong id="sMov">0</strong></span>
          <span>ğŸ’€ <strong id="sKills">0</strong></span>
        </div>
        <div id="equipList"></div>
      </div>
    </div>
    <div class="pr">
      <div class="mp">
        <div></div>
        <button class="btn" onclick="G.move(0,-1)">â–²</button>
        <div></div>
        <button class="btn" onclick="G.move(-1,0)">â—„</button>
        <div class="cc">ğŸ§­</div>
        <button class="btn" onclick="G.move(1,0)">â–º</button>
        <div></div>
        <button class="btn" onclick="G.move(0,1)">â–¼</button>
        <div></div>
      </div>
    </div>
  </div>
</div>

<div id="deathScr" class="ds">
  <div class="dc">
    <div class="d-sk">ğŸ’€</div>
    <div class="d-t">YOU DIED</div>
    <div class="d-s">
      <div>Survived <strong id="dDays">0</strong> days</div>
      <div>Killed <strong id="dKills">0</strong> zombies</div>
      <div><strong id="dTurns">0</strong> actions taken</div>
    </div>
    <button class="btn d-b" onclick="G.restart()">TRY AGAIN</button>
  </div>
</div>

<script src="./config.js"></script>
<script src="./world.js"></script>
<script src="./ui.js"></script>
<script src="./game.js"></script>
<script>
window.onload = function() {
  var missing = [];
  if (typeof C === 'undefined') missing.push('config.js');
  if (typeof World === 'undefined') missing.push('world.js');
  if (typeof UI === 'undefined') missing.push('ui.js');
  if (typeof Game === 'undefined') missing.push('game.js');
  if (missing.length) {
    document.getElementById('gameLog').innerHTML =
      '<div class="le l-bad">Failed to load: ' + missing.join(', ') + '</div>' +
      '<div class="le l-bad">Make sure all .js files are in the same folder as index.html</div>';
    return;
  }
  try { G = new Game(); }
  catch(e) {
    document.getElementById('gameLog').innerHTML =
      '<div class="le l-bad">Init error: ' + e.message + '</div>' +
      '<div class="le" style="color:#666;font-size:10px">' + e.stack + '</div>';
  }
};
</script>

</body>
</html>